---
title: 'PiServer HDD Power Woes'
date: 2020-09-05
author: 'Yomi Ikuru'
excerpt: Data corruption, power loss and modifications!
cover:
  image: ../../../assets/blog/piserver-usbmod/usbmod.jpg
  alt: USB Hub and HDD
tags: ['project']
---

import ImageGallery from '../../../components/ImageGallery.astro';

import usbmodGallery1 from "../../../assets/blog/piserver-usbmod/back_confined.jpg";
import usbmodGallery2 from "../../../assets/blog/piserver-usbmod/front_confined.jpg";
import usbmodGallery3 from "../../../assets/blog/piserver-usbmod/top_exposed_wideview.jpg";
import usbmodGallery4 from "../../../assets/blog/piserver-usbmod/top_exposed.jpg";

A couple months down the line with [PiServer](https://yomis.blog/piserver), I noticed an issue that I’ve been lazy to fix until now.
Ever so often, the hard drive (HDD) in PiServer would cut out when I happen to SSH in or access an application on PiServer over the network. It has caused a few minor issues such as corrupting a few files and halting certain processes until the HDD is able to spin back up.

I’ve now been able to rectify this issue by using a 5V powered USB 3.0 hub (an inexpensive noname hub from eBay). It’s not an elegant solution but it gets the job done. The HDD will now receive its power directly from the power supply as opposed to sharing power with the Pi’s processor, of which I had to remove its core frequency overclock.

<ImageGallery 
  images={[
    {src: usbmodGallery1},
    {src: usbmodGallery2},
    {src: usbmodGallery3},
    {src: usbmodGallery4},
  ]}
  columns={3}
/>

This mod allows for storage expansion/redundancy with another HDD in future. The throughput of USB 3.0, well now called USB 3.1 Gen 1 is 5Gbps (gigabits) theoretically. Don’t get me started on the changes of the other USB 3 spec names, they seem unnecessary. The 5Gbps theoretical speed translates to about 300MB/s applicable which would be more than good enough for two spinning HDDs (The single HDD tops out at around 120MB/s). This is assuming the total bandwidth to the USB chip via PCIe is not constrained on the Raspberry Pi 4 which shouldn’t be the case.
