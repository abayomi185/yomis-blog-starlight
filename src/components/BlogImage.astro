---
import { Image } from 'astro:assets';

export interface Props {
  src: ImageMetadata;
  alt: string;
  caption?: string;
  maxWidth?: string;
  class?: string;
  showCaption?: boolean;
}

const { src, alt, maxWidth = '600px', class: className, showCaption = true, ...rest } = Astro.props;
---

<figure class={`blog-image ${className || ''}`}>
  <Image
    src={src}
    alt={alt}
    style={`max-width: ${maxWidth}; height: auto; object-fit: contain;`}
    {...rest}
  />
  {showCaption && <figcaption class="image-caption">{rest.caption ?? alt}</figcaption>}
</figure>

<style>
  .blog-image {
    margin: 1.5rem 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
  }

  .blog-image img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: block;
  }

  .image-caption {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: #666;
    text-align: center;
    font-style: italic;
    line-height: 1.4;
  }

  /* Dark mode support */
  :global(.dark) .image-caption {
    color: #aaa;
  }
</style>
